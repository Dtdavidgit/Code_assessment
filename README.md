# Taxonomic Data Analysis

The repositories contains the code for assessment for a coding assessment of my interview. There are two python scripts in the repo. The first one is **gen_data.py**, it is a very simple script to generate a test dataset which follows the format of the sample_data provided by the company. Currently the test dataset contains 1,000 species and 21 distinct phylums.

The other python script **taxonomic_analysis.py**, performs an analysis of taxonomic data contained in a CSV file generated by myself. It calculates the total species count and the average species count per species within each taxonomic phylum. The script also generates a bar chart showing the total species count for each phylum. The bar chart can be sorted either by the phylum with the highest total species count or alphabetically. Additionally, the color scheme for the chart is customizable, and the results are saved in a CSV file. The script is containerized using Docker for easy deployment and execution.

## Table of Contents

-   [Features](#features)
-   [Requirements](#requirements)
-   [Setup and Installation](#setup-and-installation)
-   [Usage](#usage)
-   [Output](#output)

## Features

-   **Data Validation**: Handles missing or invalid data in the CSV input file.
-   **Summary Statistics**: Calculates:
    -   Total species count for each taxonomic phylum.
    -   Average species count per species within each phylum, and round it ot the second decimal place.
-   **Customizable Visualization**: Generates a bar chart using the D3 category20 color scheme or default colors.
-   **Sorting**: Option to sort the bar chart by total species count (descending) or alphabetically.
-   **Results Export**: Saves summary statistics to an output CSV file.
-   **High-Resolution Output**: Generates high-resolution plots for publication-quality visuals.

## Requirements

-   Python 3.6 or higher
-   Docker (for containerization)

### Python Dependencies:

-   `pandas`
-   `matplotlib`
-   `argparse`

### Docker Image:

The script is already containerized, and you can use the Docker image to run it in a consistent environment.

## Setup and Installation

1.  Clone this repository to your local machine or server.
      
    `git clone https://github.com/Dtdavidgit/Code_assessment.git`
    
    `cd Code_assessment` 
    
2.  **Docker Setup**: The project comes with a `Dockerfile` that allows you to build and run the script in a containerized environment.
    
    -   Build the Docker image:
        
        `docker build -t taxonomic_analysis .` 
        

## Usage

You can run the Python script using Docker:


    docker run -v $(pwd):/app taxonomic_analysis  -i taxonomic_data.csv -o output_summary.csv --sort abundance --dpi 300 --color d3
    
Explanation of the command:

-   `-v $(pwd):/app`: This mounts your local data directory (where the input CSV file is located) to the `/app` directory inside the container.
-   `taxonomic_analysis`: This is the name of the Docker image we built.
-   `-i taxonomic_data.csv`: Specifies the input file.
-   `-o output_summary.csv`: Specifies the output file.
-   `--sort abundance`: Specifies the sorting order for the bar chart (`abundance` or `alphabetical`).
-   `--dpi 300`: Specifies the resolution of the output chart (DPI).
-   `--color d3`: Specifies the color scheme for the bar chart.
    
This command will:

-   Analyze the data in `taxonomic_data.csv`.
-   Save the summary statistics in `output_summary.csv`.
-   Generate a bar chart sorted by total species count.
-   Use the D3 category20 color scheme.
-   Save the bar chart as a high-resolution image with a DPI of 300.


## Output

1.  **CSV Summary Statistics**:
    
    -   The output file (`output_summary.csv`) will contain the following columns:
        -   `Phylum`: The taxonomic phylum.
        -   `Total Species Count`: The total number of species within that phylum.
        -   `Average Species Count`: The average count per species within that phylum (rounded to 2 decimal places).
    
    The table will be sorted by `Average Species Count` in descending order.
    
2.  **Bar Chart**:
    
    -   A high-resolution bar chart will be generated showing the total species count for each phylum.
    -   The chart will be sorted based on the user's choice: either by total species count (descending) or alphabetically.
    -   The D3 category20 color scheme will be used, or you can choose a default color scheme.
    -   The chart will be saved as `phylum_species_count.png` in the current working directory.
----------

This README provides all necessary information for setting up and running the Python script in a Docker container.
